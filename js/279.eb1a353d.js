"use strict";(self["webpackChunkcli_demo"]=self["webpackChunkcli_demo"]||[]).push([[279],{2279:function(l,e,o){o.r(e),o.d(e,{default:function(){return il}});var t=o(6252),c=o(9963);const a=(0,t._)("h2",null,"單一產品頁面",-1),r={class:"modal-dialog modal-xl"},s={class:"modal-content border-0"},i={class:"modal-header bg-dark text-white"},d={id:"productModalLabel",class:"modal-title"},n={key:0},p={key:1},u={class:"modal-body"},m={class:"row"},h={class:"col-sm-4"},b={class:"mb-3"},_=(0,t._)("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),f=["src"],g=(0,t._)("h3",{class:"mb-3"},"多圖新增",-1),y={key:0},v={class:"mb-3"},k=(0,t._)("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),U=["onUpdate:modelValue"],w=["src"],x={key:0},V={key:1},C={class:"col-sm-8"},$={class:"mb-3"},D=(0,t._)("label",{for:"title",class:"form-label"},"標題",-1),E={class:"row"},P={class:"mb-3 col-md-6"},N=(0,t._)("label",{for:"category",class:"form-label"},"分類",-1),q={class:"mb-3 col-md-6"},A=(0,t._)("label",{for:"price",class:"form-label"},"單位",-1),H={class:"row"},I={class:"mb-3 col-md-6"},Y=(0,t._)("label",{for:"origin_price",class:"form-label"},"原價",-1),F={class:"mb-3 col-md-6"},K=(0,t._)("label",{for:"price",class:"form-label"},"售價",-1),L={class:"row"},M=(0,t._)("p",{class:"mb-1"},"促銷方式",-1),S={class:"d-flex"},Z={class:"form-check me-4"},j=(0,t._)("label",{class:"form-check-label",for:"check1"},"新品",-1),z={class:"form-check me-4"},B=(0,t._)("label",{class:"form-check-label",for:"check2"},"熱門",-1),G={class:"form-check me-4"},J=(0,t._)("label",{class:"form-check-label",for:"check3"},"特價",-1),O=(0,t._)("hr",null,null,-1),Q={class:"mb-3"},R=(0,t._)("label",{for:"description",class:"form-label"},"產品描述",-1),T={class:"mb-3"},W=(0,t._)("label",{for:"content",class:"form-label"},"說明內容",-1),X={class:"mb-3"},ll={class:"form-check"},el=(0,t._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ol={class:"modal-footer"};function tl(l,e,o,tl,cl,al){return(0,t.wg)(),(0,t.iD)(t.HY,null,[a,(0,t._)("div",r,[(0,t._)("div",s,[(0,t._)("div",i,[(0,t._)("h5",d,[cl.isNew?((0,t.wg)(),(0,t.iD)("span",n,"新增產品")):((0,t.wg)(),(0,t.iD)("span",p,"編輯產品"))]),(0,t._)("button",{type:"button",class:"btn-close bg-light","aria-label":"Close",onClick:e[0]||(e[0]=(...l)=>al.cancelEdit&&al.cancelEdit(...l))})]),(0,t._)("div",u,[(0,t._)("div",m,[(0,t._)("div",h,[(0,t._)("div",b,[_,(0,t._)("input",{type:"file",class:"form-control mb-3",id:"file",onChange:e[1]||(e[1]=(...l)=>al.upload&&al.upload(...l)),placeholder:"選擇圖片上傳"},null,32),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>cl.product.imageUrl=l),type:"text",class:"form-control mb-2",placeholder:"請輸入圖片連結"},null,512),[[c.nr,cl.product.imageUrl]]),(0,t._)("img",{class:"img-fluid",src:cl.product.imageUrl},null,8,f)]),g,Array.isArray(cl.product.imagesUrl)?((0,t.wg)(),(0,t.iD)("div",y,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(cl.product.imagesUrl,((l,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"mb-1",key:e},[(0,t._)("div",v,[k,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":l=>cl.product.imagesUrl[e]=l},null,8,U),[[c.nr,cl.product.imagesUrl[e]]])]),(0,t._)("img",{class:"img-fluid",src:l},null,8,w)])))),128)),!cl.product.imagesUrl.length||cl.product.imagesUrl[cl.product.imagesUrl.length-1]?((0,t.wg)(),(0,t.iD)("div",x,[(0,t._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=l=>cl.product.imagesUrl.push(""))}," 新增圖片 ")])):(0,t.kq)("",!0),(0,t._)("div",null,[(0,t._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[4]||(e[4]=l=>cl.product.imagesUrl.pop())}," 刪除圖片 ")])])):((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[5]||(e[5]=l=>al.createImagesUrl())}," 新增圖片 ")]))]),(0,t._)("div",C,[(0,t._)("div",$,[D,(0,t.wy)((0,t._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=l=>cl.product.title=l)},null,512),[[c.nr,cl.product.title]])]),(0,t._)("div",E,[(0,t._)("div",P,[N,(0,t.wy)((0,t._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=l=>cl.product.category=l)},null,512),[[c.nr,cl.product.category]])]),(0,t._)("div",q,[A,(0,t.wy)((0,t._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=l=>cl.product.unit=l)},null,512),[[c.nr,cl.product.unit]])])]),(0,t._)("div",H,[(0,t._)("div",I,[Y,(0,t.wy)((0,t._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=l=>cl.product.origin_price=l)},null,512),[[c.nr,cl.product.origin_price,void 0,{number:!0}]])]),(0,t._)("div",F,[K,(0,t.wy)((0,t._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=l=>cl.product.price=l)},null,512),[[c.nr,cl.product.price,void 0,{number:!0}]])])]),(0,t._)("div",L,[M,(0,t._)("ul",S,[(0,t._)("li",Z,[(0,t.wy)((0,t._)("input",{type:"checkbox",class:"form-check-input",id:"check1",value:"新品","onUpdate:modelValue":e[11]||(e[11]=l=>cl.product.promotion=l)},null,512),[[c.e8,cl.product.promotion]]),j]),(0,t._)("li",z,[(0,t.wy)((0,t._)("input",{type:"checkbox",class:"form-check-input",id:"check2",value:"熱門","onUpdate:modelValue":e[12]||(e[12]=l=>cl.product.promotion=l)},null,512),[[c.e8,cl.product.promotion]]),B]),(0,t._)("li",G,[(0,t.wy)((0,t._)("input",{type:"checkbox",class:"form-check-input",id:"check3",value:"特價","onUpdate:modelValue":e[13]||(e[13]=l=>cl.product.promotion=l)},null,512),[[c.e8,cl.product.promotion]]),J])])]),O,(0,t._)("div",Q,[R,(0,t.wy)((0,t._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[14]||(e[14]=l=>cl.product.description=l)},"\r\n                  ",512),[[c.nr,cl.product.description]])]),(0,t._)("div",T,[W,(0,t.wy)((0,t._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[15]||(e[15]=l=>cl.product.content=l)},"\r\n                  ",512),[[c.nr,cl.product.content]])]),(0,t._)("div",X,[(0,t._)("div",ll,[(0,t.wy)((0,t._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[16]||(e[16]=l=>cl.product.is_enabled=l)},null,512),[[c.e8,cl.product.is_enabled]]),el])])])])]),(0,t._)("div",ol,[(0,t._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[17]||(e[17]=(...l)=>al.cancelEdit&&al.cancelEdit(...l))}," 取消 "),(0,t._)("button",{type:"button",class:"btn btn-primary",onClick:e[18]||(e[18]=(...l)=>al.updateProduct&&al.updateProduct(...l))}," 確認 ")])])])],64)}let cl=null;var al={data(){return{product:{promotion:[],imagesUrl:[]},isNew:!1}},methods:{getProduct(){const{id:l}=this.$route.params;void 0===l?this.isNew=!0:this.$http(`https://vue3-course-api.hexschool.io/v2/api/otispath/product/${l}`).then((l=>{this.product=l.data.product})).catch((l=>{console.log(l)}))},upload(){const l=cl.files[0];console.log(l);const e=new FormData;e.append("file-to-upload",l),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/upload/",e).then((l=>{console.log(l.data.imageUrl),this.product.imageUrl=l.data.imageUrl})).catch((l=>{console.log(l)}))},createImagesUrl(){this.product.imagesUrl=[],this.product.imagesUrl.push("")},updateProduct(){this.isNew?this.$http.post("https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product",{data:this.product}).then((l=>{alert(l.data.message),this.$router.push("/admin/products")})).catch((l=>{alert(l)})):this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/otispath/admin/product/${this.product.id}`,{data:this.product}).then((l=>{alert(l.data.message),this.$router.push("/admin/products")})).catch((l=>{alert(l)}))},cancelEdit(){this.product={promotion:[],imagesUrl:[]},this.$router.push("/admin/products")}},mounted(){this.getProduct(),cl=document.querySelector("#file")}},rl=o(3744);const sl=(0,rl.Z)(al,[["render",tl]]);var il=sl}}]);
//# sourceMappingURL=279.eb1a353d.js.map